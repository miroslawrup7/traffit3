const cityListBtnLoc=document.querySelector(".city .arrow-down"),cityListLoc=document.querySelector(".city .list"),distanceListBtnLoc=document.querySelector(".distance .arrow-down"),distanceListLoc=document.querySelector(".distance .list"),sectorListBtnLoc=document.querySelector(".sector .arrow-down"),sectorListLoc=document.querySelector(".sector .list"),employmentFormListBtnLoc=document.querySelector(".employment-form .arrow-down"),employmentFormListLoc=document.querySelector(".employment-form .list"),workingHoursListBtnLoc=document.querySelector(".working-hours .arrow-down"),workingHoursListLoc=document.querySelector(".working-hours .list"),languageListBtnLoc=document.querySelector(".language .arrow-down"),languageListLoc=document.querySelector(".language .list"),awardedResultsLoc=document.querySelector(".awarded"),recordsOnPageLoc=document.querySelector(".records-on-page"),pagesSwitchLoc=document.querySelector(".pages"),brancheWrapperLoc=document.querySelector(".sector"),branchesLoc=document.querySelector(".sector ul"),jobFormLoc=document.querySelector(".employment-form ul");cityListBtnLoc.addEventListener("click",(()=>{cityListLoc.classList.toggle("expand")})),distanceListBtnLoc.addEventListener("click",(()=>{distanceListLoc.classList.toggle("expand")})),sectorListBtnLoc.addEventListener("click",(()=>{sectorListLoc.classList.toggle("expand")})),employmentFormListBtnLoc.addEventListener("click",(()=>{employmentFormListLoc.classList.toggle("expand")})),workingHoursListBtnLoc.addEventListener("click",(()=>{workingHoursListLoc.classList.toggle("expand")})),languageListBtnLoc.addEventListener("click",(()=>{languageListLoc.classList.toggle("expand")}));let filterConfigData={},apiPage=1,rawAPIArray=[],allRecordsArray=[],recordsNumber=0,recordsOnPage=20,filtersON=!1,filterBranchesList=[],filterJobFormList=[],filterListMaxHeight=0;recordsOnPageLoc.value=recordsOnPage;const createFilteredRecordsArray=()=>{const e=document.querySelectorAll(".branches option"),t=document.querySelectorAll(".job-form option"),r=document.querySelectorAll(".job-type option"),o=document.querySelectorAll(".lang option"),a=document.querySelectorAll(".countries option"),n=document.querySelectorAll(".cities option");let i=allRecordsArray,c=[];c=filterConfigData.branche_filter.length?filterConfigData.branche_filter:Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}));let l=[];0!==c.length?i.forEach(((e,t)=>{let r=!1;c.forEach((t=>{e.branche===t&&(r=!0)})),r&&l.push(e)})):l=i;let s=Array.from(t).filter((function(e){return e.selected})).map((function(e){return e.value})),d=[];0!==s.length?l.forEach(((e,t)=>{if(e.jobForm){let t=!1;s.forEach((r=>{-1!==e.jobForm.indexOf(r)&&(t=!0)})),t&&d.push(e)}})):d=l;let f=Array.from(r).filter((function(e){return e.selected})).map((function(e){return e.value})),g=[];0!==f.length?d.forEach(((e,t)=>{let r=!1;f.forEach((t=>{e.jobType===t&&(r=!0)})),r&&g.push(e)})):g=d;let u=[];u=filterConfigData.language_filter.length?filterConfigData.language_filter:Array.from(o).filter((function(e){return e.selected})).map((function(e){return e.value}));let m,h,p=[];0!==u.length?g.forEach(((e,t)=>{let r=!1;u.forEach((t=>{e.lang===t&&(r=!0)})),r&&p.push(e)})):p=g,salaryMarkLoc.checked&&(m=parseInt(displayValOne.innerText),h=parseInt(displayValTwo.innerText));let L=[];salaryMarkLoc.checked?p.forEach(((e,t)=>{let r=!1;e.visibleRate&&(e.salaryTo&&e.salaryFrom&&e.salaryTo>=m&&e.salaryFrom<=h&&(r=!0),e.salaryTo&&!e.salaryFrom&&e.salaryTo>=m&&(r=!0),!e.salaryTo&&e.salaryFrom&&e.salaryFrom<=h&&(r=!0)),r&&L.push(e)})):L=p;let y=[];filterConfigData.location_country_filter.length?y=filterConfigData.location_country_filter:locationMarkLoc.checked&&(y=Array.from(a).filter((function(e){if(e.value)return e.selected})).map((function(e){if(e.value)return e.value})));let b=[];(locationMarkLoc.checked||filterConfigData.location_country_filter.length)&&y.length?L.forEach(((e,t)=>{let r=!1;y.forEach((t=>{e.country===t&&(r=!0)})),r&&b.push(e)})):b=L;let v=[];filterConfigData.location_city_filter.length?v=filterConfigData.location_city_filter:locationMarkLoc.checked&&(v=Array.from(n).filter((function(e){if(e.value)return e.selected})).map((function(e){if(e.value)return e.value})));let w=[];if(locationMarkLoc.checked||filterConfigData.location_city_filter.length)if(v.length){let e,t,r,o,a,n,i=0;i=parseInt(locationDotLoc.value),b.forEach(((c,l)=>{c.city===v[0]&&(e=c.lati,t=c.longi,r=e-.009044*i,o=e+.009044*i,a=t-.0089831*i/Math.cos(e*Math.PI/180),n=t+.0089831*i/Math.cos(e*Math.PI/180))})),b.forEach(((e,t)=>{let i=!1;e.lati<=o&&e.lati>=r&&e.longi<=n&&e.longi>=a&&(i=!0),i&&w.push(e)}))}else w=b;else w=b;let _=[];remoteLoc.checked||filterConfigData.remote_filter?w.forEach(((e,t)=>{let r=!1;e.remote&&(r=!0),r&&_.push(e)})):_=w;let A=[];relocationLoc.checked?_.forEach(((e,t)=>{let r=!1;e.relocation&&(r=!0),r&&A.push(e)})):A=_;let x=[],P=searchInputLoc.value;P?A.forEach(((e,t)=>{let r,o=!1;e.description.forEach((function(e){e.value&&"geolocation"!==e.field_id&&(r=e.value.toLowerCase().search(P.toLowerCase()),-1!==r&&(o=!0))})),r=e.name.toLowerCase().search(P.toLowerCase()),-1!==r&&(o=!0),o&&x.push(e)})):x=A,filteredRecordsArray_11=[];let F=[];filterConfigData.recruitmentType_filter.length&&(F=filterConfigData.recruitmentType_filter),0!==F.length?x.forEach(((e,t)=>{let r=!1;F.forEach((t=>{e.recruitmentType===t&&(r=!0)})),r&&filteredRecordsArray_11.push(e)})):filteredRecordsArray_11=x,recordsNumber=filteredRecordsArray_11.length,summariseDownload(recordsNumber),createRecordBoxes(filteredRecordsArray_11,0,recordsOnPage),setPages(recordsNumber),filtersON=!0,hideFilter(),setTimeout(setParentIframeHeight,1e3)},pagesContainerStart=()=>{pagesContainer.classList.add("active")},dropDownBtnStart=()=>{dropDownLoc.addEventListener("click",showHideFilters),dropDownLoc.classList.add("active")},createFilterLists=e=>{e.branche_visible||brancheWrapperLoc.classList.add("unactive"),filterBranchesList.length>0&&(filterBranchesList.sort((function(e,t){return e.localeCompare(t)})),rowHeight=21*filterBranchesList.length+3,filterListMaxHeight=rowHeight,filterBranchesList.forEach((function(e){branchesLoc.insertAdjacentHTML("beforeend",`<li>\n                <div class="checkbox-container-small">\n                    <label class="checkbox">\n                        <input type="checkbox" id="sector-${e}" name="sector-${e}" value="sector-${e}">\n                        <span class="checkmark"></span>\n                    </label>\n                    <label class="label-text" for="sector-${e}">${e}</label>\n                </div>\n            </li>`)}))),filterJobFormList.length>0&&(console.log(filterJobFormList),filterJobFormList.sort((function(e,t){return e.localeCompare(t)})),rowHeight=21*filterJobFormList.length+3,filterJobFormList.forEach((function(e){jobFormLoc.insertAdjacentHTML("beforeend",`<li>\n                <div class="checkbox-container-small">\n                    <label class="checkbox">\n                        <input type="checkbox" id="employment-form-${e}" name="employment-form-${e}" value="employment-form-${e}">\n                        <span class="checkmark"></span>\n                    </label>\n                    <label class="label-text" for="employment-form-${e}">${e}</label>\n                </div>\n            </li>`)})))},changePage=e=>{pageButtonsLoc.forEach((e=>{e.classList.remove("active")})),e.classList.add("active");let t=recordsOnPage*parseInt(e.innerText)-recordsOnPage,r=recordsOnPage*parseInt(e.innerText);filtersON?createRecordBoxes(filteredRecordsArray_11,t,r):createRecordBoxes(allRecordsArray,t,r),globActivePageNo=parseInt(e.innerText),setTimeout(setParentIframeHeight(),500)};function getWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}function getHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}let maxPageBtns,pagesQuantityCalc;getWidth()<500&&(maxPageBtns=6),getWidth()>=500&&getWidth()<700&&(maxPageBtns=8),getWidth()>700&&getWidth()<900&&(maxPageBtns=10),getWidth()>900&&getWidth()<1024&&(maxPageBtns=15),getWidth()>1024&&(maxPageBtns=20);const setPages=e=>{if(pagesQuantityCalc=Math.ceil(e/recordsOnPage),pagesQuantityCalc>maxPageBtns){for(pagesSwitchLoc.replaceChildren(),n=1;n<=maxPageBtns;n++)1===n?pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page active">${n}</div>`):pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page">${n}</div>`);pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next active"><img src="./img/chevron-right.svg" alt="" /></div>'),document.querySelector(".next").addEventListener("click",(()=>{moveNextPagesBtns()}))}else{for(pagesSwitchLoc.replaceChildren(),n=1;n<=pagesQuantityCalc;n++)1===n?pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page active">${n}</div>`):pagesSwitchLoc.insertAdjacentHTML("beforeend",`<div class="page">${n}</div>`);pagesSwitchLoc.insertAdjacentHTML("beforeend",'<div class="next"><img src="" alt="" /></div>')}pagesSwitchLoc.insertAdjacentHTML("afterbegin",'<div class="prev"><img src="" alt="" /></div>'),pageButtonsLoc=document.querySelectorAll(".page"),pageButtonsLoc.forEach((e=>{e.addEventListener("click",(e=>{changePage(e.target)}))}))},createAwardedRecordBoxes=(e,t)=>{awardedResultsLoc.replaceChildren();let r=e.filter((e=>e.awarded));if(console.log(r),r.length>0)for(t.remote_filter&&(r=r.filter((e=>e.remote))),t.language_filter.length>0&&filterAwarded(t.language_filter,r,"lang"),t.branche_filter.length>0&&filterAwarded(t.branche_filter,r,"branche"),t.location_country_filter.length>0&&filterAwarded(t.location_country_filter,r,"country"),t.location_city_filter.length>0&&filterAwarded(t.location_city_filter,r,"city"),t.recruitmentType_filter.length>0&&filterAwarded(t.recruitmentType_filter,r,"recruitmentType"),i=firstRecordNumber;i<10;i++)if(r[i]){let e="",t="";"PT"===r[i].recruitmentType&&(e="pt-border",t="pt-text"),"RS"===r[i].recruitmentType&&(e="rs-border",t="rs-text"),"WEW"===r[i].recruitmentType&&(e="wew-border",t="wew-text");let o="";r[i].jobForm&&r[i].jobForm.forEach((function(e){o=o+"<p>"+e+"</p>"})),awardedResultsLoc.insertAdjacentHTML("beforeend",`<a href="${r[i].url}" target="_blank"><div class="result ${e}">\n                <div class="top">\n                \n                        <div class="lang">\n                            <p>${r[i].lang}</p>\n                        </div>\n                        <div class="branche-name">\n                            <div class="branche">${r[i].branche?r[i].branche:""}</div>\n                            <div class="name ${t}">${r[i].name}</div>\n                        </div>\n                    \n                </div>\n\n                <div class="bottom">\n                    <div class="city-container">\n                        <div class="city"><img src="./img/location_dot.svg">${r[i].city}</div></div>\n                        <div class="details-container">\n                        ${r[i].remote?"<div class='remote'>zdalna</div>":""}\n                        ${r[i].relocation?"<div class='relocation'>relocation</div>":""}\n                        ${r[i].jobType?"<div class='jobtype'>"+r[i].jobType+"</div>":""}\n                        ${r[i].visibleRate&&r[i].salaryFrom&&r[i].salaryTo?"<div class='salary'>"+r[i].salaryFrom+" - "+r[i].salaryTo+"</div>":""}\n                        <div class="employmentform">${o}</div>\n                        </div>\n                    \n                </div>\n\n                <div class="ribbon-wrap">\n                        <div class="ribbon">\n                                <img src="./img/star.svg" alt="">\n                                <img src="./img/star.svg" alt="">\n                                <img src="./img/star.svg" alt="">\n                            </div>\n                        </div>\n                </div>\n\n                \n\n            </div></a>`)}},summariseDownload=e=>{recNumLoc.innerText=`Znaleziono ${e} ogłoszeń`,e?noResultsLoc.classList.remove("active"):noResultsLoc.classList.add("active")},createDataForFilters=(e,t,r,o,a,n,i,c,l,s,d)=>{-1===filterBranchesList.indexOf(e)&&void 0!==e&&(filterConfigData.branche_filter.length?-1!==filterConfigData.branche_filter.indexOf(e)&&filterBranchesList.push(e):filterBranchesList.push(e)),t&&t.forEach((function(e){-1===filterJobFormList.indexOf(e)&&filterJobFormList.push(e)}))},reworkData=e=>{e.forEach((e=>{var t,r;e.options.job_location&&(parsedJobLocation=JSON.parse(e.options.job_location)),allRecordsArray.push({url:e.url,name:e.advert.name,branche:e.options.branches,lang:e.advert.language,jobType:e.options.job_type,visibleRate:parseInt(e.options._Widoczna_stawka),salaryFrom:parseInt(e.options._spodziewane_wynagrodzenie_od),salaryTo:parseInt(e.options._spodziewane_wynagrodzenie_do),remote:e.options.remote,relocation:e.options._relokacja,recruitmentType:e.options._rekrutacja_rodzaj,jobForm:e.options._forma_zatrudnienia,country:parsedJobLocation.country,city:parsedJobLocation.locality,lati:parseFloat(parsedJobLocation.latitude),longi:parseFloat(parsedJobLocation.longitude),description:e.advert.values,awarded:e.awarded}),t=e.options.branches,r=e.options._forma_zatrudnienia,e.options.job_type,e.advert.language,parseInt(e.options._Widoczna_stawka),parseInt(e.options._spodziewane_wynagrodzenie_od),parseInt(e.options._spodziewane_wynagrodzenie_do),parsedJobLocation.country,parsedJobLocation.locality,parseFloat(parsedJobLocation.latitude),parseFloat(parsedJobLocation.longitude),-1===filterBranchesList.indexOf(t)&&void 0!==t&&(filterConfigData.branche_filter.length?-1!==filterConfigData.branche_filter.indexOf(t)&&filterBranchesList.push(t):filterBranchesList.push(t)),r&&r.forEach((function(e){-1===filterJobFormList.indexOf(e)&&filterJobFormList.push(e)}))}))},getAPI=e=>fetch("https://grupaprogres.traffit.com/public/job_posts/published",{mode:"cors",headers:{"Content-Type":"application/json","X-Request-Page-Size":"100","X-Request-Current-Page":e,"X-Request-Sort":'{"sort_by": "id", "direction": "ASC"}'}}),loopOnAPI=(e,t)=>{e.length>0?(rawAPIArray=rawAPIArray.concat(e),apiPage++,console.log("rawAPIArray",rawAPIArray),createRecordsObjFromAPI(apiPage,t)):(reworkData(rawAPIArray),console.log("allRecordsArray",allRecordsArray),recordsNumber=rawAPIArray.length,console.log("recordsNumber",recordsNumber),createAwardedRecordBoxes(allRecordsArray,t),setPages(recordsNumber),createFilterLists(t))};async function createRecordsObjFromAPI(e,t){const r=await getAPI(e),o=await r.json();loopOnAPI(o,t)}const getConfigFilter=()=>fetch("./config/config.json");async function readConfigFilter(){try{const e=await fetch("./config/config.json");filterConfigData=await e.json(),console.log("filterConfigData",filterConfigData),createRecordsObjFromAPI(apiPage,filterConfigData)}catch(e){console.error(e),createRecordsObjFromAPI(apiPage)}}readConfigFilter();
//# sourceMappingURL=all.min.js.map
